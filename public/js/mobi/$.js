define("mobi/$",["./core","./lang","./event","./ajax","./ajax_ext","./touch","./action","./detect","./history"],function(a,b,c){var d=a("./core");a("./event"),a("./ajax");var e=a("./ajax_ext");d.ajaxExt=e,a("./touch");var f=a("./action");d.action=f,a("./detect");var g=a("./history");d.history=g,c.exports=d}),define("mobi/core",["./lang"],function(a){function b(a){return null==a?String(a):U[V.call(a)]||"object"}function c(a){return null!=a&&a===a.window}function d(a){return null!=a&&a.nodeType===a.DOCUMENT_NODE}function e(a){return C.call(a,function(a){return null!=a})}function f(a){return"object"===b(a)}function g(a){if(!a||"object"!==b(a)||a.nodeType||c(a))return!1;try{if(a.constructor&&!X.call(a,"constructor")&&!X.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(d){return!1}var e;for(e in a);return void 0===e||X.call(a,e)}function h(a){return a.length>0?v.fn.concat.apply([],a):a}function i(a){return"number"==typeof a.length}function j(a){return a.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function k(a){return a in F?F[a]:F[a]=new RegExp("(^|\\s)"+a+"(\\s|$)")}function l(a,b){return"number"!=typeof b||H[j(a)]?b:b+"px"}function m(a,b,c,d){return v.isFunction(b)?b.call(a,c,d):b}function n(a,b,c){null===c?a.removeAttribute(b):a.setAttribute(b,c)}function o(a,b){var c=a.className,d=c&&c.baseVal!==u;return b===u?d?c.baseVal:c:(d?c.baseVal=b:a.className=b,void 0)}function p(a){var b,c;return E[a]||(b=D.createElement(a),D.body.appendChild(b),c=G(b,"").getPropertyValue("display"),b.parentNode.removeChild(b),"none"===c&&(c="block"),E[a]=c),E[a]}function q(a){return"children"in a?B.call(a.children):v.map(a.childNodes,function(a){return 1===a.nodeType?a:void 0})}function r(a){var b;try{return a?"true"===a||("false"===a?!1:"null"===a?null:isNaN(b=Number(a))?/^[\[\{]/.test(a)?v.parseJSON(a):a:b):a}catch(c){return a}}function s(a,b){return b===u?v(a):v(a).filter(b)}function t(a,b){b(a);for(var c in a.childNodes)t(a.childNodes[c],b)}var u,v,w,x,y,z=a("./lang"),A=[],B=A.slice,C=A.slice,D=window.document,E={},F={},G=D.defaultView.getComputedStyle,H={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},I=/^\s*<(\w+|!)[^>]*>/,J=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,K=/^(?:body|html)$/i,L=["val","css","html","text","data","width","height","offset"],M=["after","prepend","before","append"],N=D.createElement("table"),O=D.createElement("tr"),P={tr:D.createElement("tbody"),tbody:N,thead:N,tfoot:N,td:O,th:O,"*":D.createElement("div")},Q=/complete|loaded|interactive/,R=/^\.([\w-]+)$/,S=/^#([\w-]*)$/,T=/^[\w-]+$/,U={},V=U.toString,W=D.createElement("div"),X=Object.prototype.hasOwnProperty,Y={};return x=function(a){return a.replace(/-+(.)?/g,function(a,b){return b?b.toUpperCase():""})},y=function(a){return C.call(a,function(b,c){return a.indexOf(b)===c})},Y.matches=function(a,b){if(!a||1!==a.nodeType)return!1;var c=a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.matchesSelector;if(c)return c.call(a,b);var d,e=a.parentNode,f=!e;return f&&(e=W).appendChild(a),d=~Y.qsa(e,b).indexOf(a),f&&W.removeChild(a),d},Y.fragment=function(a,b,c){a.replace&&(a=a.replace(J,"<$1></$2>")),b===u&&(b=I.test(a)&&RegExp.$1),b in P||(b="*");var d,e,f=P[b];return f.innerHTML=""+a,e=v.each(B.call(f.childNodes),function(){f.removeChild(this)}),g(c)&&(d=v(e),v.each(c,function(a,b){L.indexOf(a)>-1?d[a](b):d.attr(a,b)})),e},Y.Z=function(a,b){return a=a||[],a.__proto__=v.fn,a.selector=b||"",a},Y.isZ=function(a){return a instanceof Y.Z},Y.init=function(a,b){if(a){if(v.isFunction(a))return v(D).ready(a);if(Y.isZ(a))return a;var c;if(v.isArray(a))c=e(a);else if(f(a))c=[g(a)?v.extend({},a):a],a=null;else if(I.test(a))c=Y.fragment(a.trim(),RegExp.$1,b),a=null;else{if(b!==u)return v(b).find(a);c=Y.qsa(D,a)}return Y.Z(c,a)}return Y.Z()},v=function(a,b){return Y.init(a,b)},z.extend(v,z),Y.qsa=function(a,b){var c;return d(a)&&S.test(b)?(c=a.getElementById(RegExp.$1))?[c]:[]:1!==a.nodeType&&9!==a.nodeType?[]:B.call(R.test(b)?a.getElementsByClassName(RegExp.$1):T.test(b)?a.getElementsByTagName(b):a.querySelectorAll(b))},v.type=b,v.isWindow=c,v.isPlainObject=g,v.uuid=0,v.support={},v.expr={},v.camelCase=x,v.map=function(a,b){var c,d,e,f=[];if(i(a))for(d=0;d<a.length;d++)c=b(a[d],d),null!=c&&f.push(c);else for(e in a)c=b(a[e],e),null!=c&&f.push(c);return h(f)},v.contains=function(a,b){return a!==b&&a.contains(b)},v.each=function(a,b){return z.each(a,function(a,c){b.call(a,c,a)}),a},window.JSON&&(v.parseJSON=JSON.parse),v.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){U["[object "+b+"]"]=b.toLowerCase()}),v.fn={forEach:function(a,b){return z.each(this,a,b),this},reduce:A.reduce,push:A.push,sort:A.sort,indexOf:A.indexOf,concat:A.concat,ready:function(a){return Q.test(D.readyState)?a(v):D.addEventListener("DOMContentLoaded",function(){a(v)},!1),this},slice:function(){return v(B.apply(this,arguments))},get:function(a){return a===u?B.call(this):this[a>=0?a:a+this.length]},toArray:function(){return this.get()},size:function(){return this.length},filter:function(a){return v.isFunction(a)?this.not(this.not(a)):v(C.call(this,function(b){return Y.matches(b,a)}))},map:function(a){return v(v.map(this,function(b,c){return a.call(b,c,b)}))},index:function(a){return a?this.indexOf(v(a)[0]):this.parent().children().indexOf(this[0])},find:function(a){var b,c=this;return b="object"==typeof a?v(a).filter(function(){var a=this;return A.some.call(c,function(b){return v.contains(b,a)})}):1===this.length?v(Y.qsa(this[0],a)):this.map(function(){return Y.qsa(this,a)})},closest:function(a,b){var c=this[0],e=!1;for("object"==typeof a&&(e=v(a));c&&!(e?e.indexOf(c)>=0:Y.matches(c,a));)c=c!==b&&!d(c)&&c.parentNode;return v(c)},each:function(a){return A.every.call(this,function(b,c){return a.call(b,c,b)!==!1}),this},attr:function(a,b){var c;return"string"==typeof a&&b===u?0===this.length||1!==this[0].nodeType?u:"value"===a&&"INPUT"===this[0].nodeName?this.val():!(c=this[0].getAttribute(a))&&a in this[0]?this[0][a]:c:this.each(function(c){if(1===this.nodeType)if(f(a))for(var d in a)n(this,d,a[d]);else n(this,a,m(this,b,c,this.getAttribute(a)))})},removeAttr:function(a){return this.each(function(){1===this.nodeType&&n(this,a)})},prop:function(a,b){return b===u?this[0]&&this[0][a]:this.each(function(c){this[a]=m(this,b,c,this[a])})},data:function(a,b){var c=this.attr("data-"+j(a),b);return null!==c?r(c):u},val:function(a){return a===u?this[0]&&(this[0].multiple?v(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value):this.each(function(b){this.value=m(this,a,b,this.value)})},offset:function(a){if(a)return this.each(function(b){var c=v(this),d=m(this,a,b,c.offset()),e=c.offsetParent().offset(),f={top:d.top-e.top,left:d.left-e.left};"static"===c.css("position")&&(f.position="relative"),c.css(f)});if(0===this.length)return null;var b=this[0].getBoundingClientRect();return{left:b.left+window.pageXOffset,top:b.top+window.pageYOffset,width:Math.round(b.width),height:Math.round(b.height)}},css:function(a,c){if(arguments.length<2&&"string"==typeof a)return this[0]&&(this[0].style[x(a)]||G(this[0],"").getPropertyValue(a));var d="";if("string"===b(a))c||0===c?d=j(a)+":"+l(a,c):this.each(function(){this.style.removeProperty(j(a))});else for(var e in a)a[e]||0===a[e]?d+=j(e)+":"+l(e,a[e])+";":this.each(function(){this.style.removeProperty(j(e))});return this.each(function(){this.style.cssText+=";"+d})},text:function(a){return a===u?this.length>0?this[0].textContent:null:this.each(function(){this.textContent=a})},hasClass:function(a){return A.some.call(this,function(a){return this.test(o(a))},k(a))},addClass:function(a){return this.each(function(b){w=[];var c=o(this),d=m(this,a,b,c);d.split(/\s+/g).forEach(function(a){v(this).hasClass(a)||w.push(a)},this),w.length&&o(this,c+(c?" ":" ")+w.join(" "))})},removeClass:function(a){return this.each(function(b){return a===u?o(this,""):(w=o(this),m(this,a,b,w).split(/\s+/g).forEach(function(a){w=w.replace(k(a)," ")}),o(this,w.trim()),void 0)})},toggleClass:function(a,b){return this.each(function(c){var d,e=v(this),f=m(this,a,c,o(this));f.split(/\s+/g).forEach(function(a){d=b===u?!e.hasClass(a):b,d?e.addClass(a):e.removeClass(a)})})},scrollTop:function(){return this.length?"scrollTop"in this[0]?this[0].scrollTop:this[0].scrollY:void 0},position:function(){if(this.length){var a=this[0],b=this.offsetParent(),c=this.offset(),d=K.test(b[0].nodeName)?{top:0,left:0}:b.offset();return c.top-=parseFloat(v(a).css("margin-top"))||0,c.left-=parseFloat(v(a).css("margin-left"))||0,d.top+=parseFloat(v(b[0]).css("border-top-width"))||0,d.left+=parseFloat(v(b[0]).css("border-left-width"))||0,{top:c.top-d.top,left:c.left-d.left}}},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(a){return this.each(function(){var b,c=v(this);b=a===u?"none"===c.css("display"):a,b?c.show():c.hide()})},prev:function(a){return v(this.pluck("previousElementSibling")).filter(a||"*")},next:function(a){return v(this.pluck("nextElementSibling")).filter(a||"*")},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},html:function(a){return a===u?this.length>0?this[0].innerHTML:null:this.each(function(b){var c=this.innerHTML;v(this).empty().append(m(this,a,b,c))})},empty:function(){return this.each(function(){this.innerHTML=""})},replaceWith:function(a){return this.before(a).remove()},wrap:function(a){var b=v.isFunction(a);if(this[0]&&!b)var c=v(a).get(0),d=c.parentNode||this.length>1;return this.each(function(e){v(this).wrapAll(b?a.call(this,e):d?c.cloneNode(!0):c)})},wrapAll:function(a){if(this[0]){v(this[0]).before(a=v(a));for(var b;(b=a.children()).length;)a=b.first();v(a).append(this)}return this},wrapInner:function(a){var b=v.isFunction(a);return this.each(function(c){var d=v(this),e=d.contents(),f=b?a.call(this,c):a;e.length?e.wrapAll(f):d.append(f)})},unwrap:function(){return this.parent().each(function(){v(this).replaceWith(v(this).children())}),this},is:function(a){return this.length>0&&Y.matches(this[0],a)},not:function(a){var b=[];if(v.isFunction(a)&&a.call!==u)this.each(function(c){a.call(this,c)||b.push(this)});else{var c="string"==typeof a?this.filter(a):i(a)&&v.isFunction(a.item)?B.call(a):v(a);this.forEach(function(a){c.indexOf(a)<0&&b.push(a)})}return v(b)},has:function(a){return this.filter(function(){return f(a)?v.contains(this,a):v(this).find(a).size()})},eq:function(a){return-1===a?this.slice(a):this.slice(a,+a+1)},first:function(){var a=this[0];return a&&!f(a)?a:v(a)},last:function(){var a=this[this.length-1];return a&&!f(a)?a:v(a)},parents:function(a){for(var b=[],c=this;c.length>0;)c=v.map(c,function(a){return(a=a.parentNode)&&!d(a)&&b.indexOf(a)<0?(b.push(a),a):void 0});return s(b,a)},parent:function(a){return s(y(this.pluck("parentNode")),a)},children:function(a){return s(this.map(function(){return q(this)}),a)},contents:function(){return this.map(function(){return B.call(this.childNodes)})},siblings:function(a){return s(this.map(function(a,b){return C.call(q(b.parentNode),function(a){return a!==b})}),a)},pluck:function(a){return v.map(this,function(b){return b[a]})},show:function(){return this.each(function(){"none"===this.style.display&&(this.style.display=null),"none"===G(this,"").getPropertyValue("display")&&(this.style.display=p(this.nodeName))})},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||D.body;a&&!K.test(a.nodeName)&&"static"===v(a).css("position");)a=a.offsetParent;return a})}},v.fn.detach=v.fn.remove,["width","height"].forEach(function(a){v.fn[a]=function(b){var e,f=this[0],g=a.replace(/./,function(a){return a[0].toUpperCase()});return b===u?c(f)?f["inner"+g]:d(f)?f.documentElement["offset"+g]:(e=this.offset())&&e[a]:this.each(function(c){f=v(this),f.css(a,m(this,b,c,f[a]()))})}}),M.forEach(function(a,c){var d=c%2;v.fn[a]=function(){var a,e,f=v.map(arguments,function(c){return a=b(c),"object"===a||"array"===a||null===c?c:Y.fragment(c)}),g=this.length>1;return f.length<1?this:this.each(function(a,b){e=d?b:b.parentNode,b=0===c?b.nextSibling:1===c?b.firstChild:2===c?b:null,f.forEach(function(a){if(g)a=a.cloneNode(!0);else if(!e)return v(a).remove();t(e.insertBefore(a,b),function(){})})})},v.fn[d?a+"To":"insert"+(c?"Before":"After")]=function(b){return v(b)[a](this),this}}),Y.Z.prototype=v.fn,Y.uniq=y,Y.deserializeValue=r,v.core=Y,v}),define("mobi/lang",[],function(a,b,c){var d=Array.prototype,e=Object.prototype,f=Function.prototype,g=e.toString,h=d.slice,i=d.push,j=f.bind,k=d.indexOf,l=d.lastIndexOf,m={};c.exports=m,m.isFunction=function(a){return"function"==typeof a},m.isArray=Array.isArray||function(a){return"[object Array]"===g.call(a)},m.isUndefined=function(a){return void 0===a},m.bind=function(a,b){var c;if(a.bind===j&&j)c=j.apply(a,h.call(arguments,1));else{var d=h.call(arguments,2);c=function(){return a.apply(b,d.concat(h.call(arguments)))}}return c},m.delay=function(a,b){var c=h.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)},m.defer=function(a){return m.delay.apply(null,[a,1].concat(h.call(arguments,1)))},m.throttle=function(a,b){var c,d,e,f,g=0,h=function(){g=new Date,e=null,f=a.apply(c,d)};return function(){var i=new Date,j=b-(i-g);return c=this,d=arguments,0>=j?(clearTimeout(e),e=null,g=i,f=a.apply(c,d)):e||(e=setTimeout(h,j)),f}},m.debounce=function(a,b,c){var d,e;return function(){var f=this,g=arguments,h=function(){d=null,c||(e=a.apply(f,g))},i=c&&!d;return clearTimeout(d),d=setTimeout(h,b),i&&(e=a.apply(f,g)),e}},m.once=function(a){var b,c=!1;return function(){return c?b:(c=!0,b=a.apply(this,arguments),a=null,b)}},m.wrap=function(a,b){return function(){var c=[a];return i.apply(c,arguments),b.apply(this,c)}},m.result=function(a,b){if(null===a)return null;var c=a[b];return m.isFunction(c)?c.apply(a,h.call(arguments,2)):c},m.each=function(a,b,c){if(a)if(a.length===+a.length){for(var d=0,e=a.length;e>d;d++)if(b.call(c,a[d],d,a)===!1)return a}else for(var f in a)if(b.call(c,a[f],f,a)===!1)return a},m.indexOf=function(a,b,c){if(a){if(k&&a.indexOf===k)return a.indexOf(b,c);for(var d=c||0,e=a.length;e>d;d++)if(a[d]===b)return d;return-1}return-1},m.lastIndexOf=function(a,b,c){if(a){if(l&&a.lastIndexOf===l)return a.lastIndexOf(b,"number"==typeof c?c:-1);for(var d=a.length-1,e=Math.min(d,"number"==typeof c?c:d);e>=0;e--)if(a[e]===b)return e;return-1}return-1},function(){var a=function(a){return a===Object(a)},b=function(c,d,e){for(var f in d){var g=d[f],h=c[f];e&&(a(g)||m.isArray(g))?(a(g)&&!a(h)&&(c[f]={}),m.isArray(g)&&!m.isArray(h)&&(c[f]=[]),b(c[f],g,e)):m.isUndefined(g)||(c[f]=g)}};m.extend=function(a){var c,d=h.call(arguments,1);return"boolean"==typeof a&&(c=a,a=d.shift()),m.each(d,function(d){b(a,d,c)}),a},m.clone=function(a,b){return b=!!b,a===Object(a)?m.isArray(a)?a.slice():m.extend(b,{},a):a}}(),m.uniqueId=function(a){return function(b){var c=++a+"";return b?b+c:c}}(0),function(a){var b={escape:a,unescape:{}},c={escape:[],unescape:[]};m.each(a,function(a,d){c.escape.push(d),c.unescape.push(a),b.unescape[a]=d});var d={escape:new RegExp("["+c.escape.join("")+"]","g"),unescape:new RegExp("("+c.unescape.join("|")+")","g")};m.each(["escape","unescape"],function(a){m[a]=function(c){return(""+c).replace(d[a],function(c){return b[a][c]})}})}({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}),m.trim=function(a){return"string"==typeof a?a.trim?a.trim():a.replace(/^\s+|\s+$/g,""):a},m.parseJSON=function(){var a=/^[\],:{}\s]*$/,b=/(?:^|:|,)(?:\s*\[)+/g,c=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,d=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g;return function(e){if(window.JSON&&window.JSON.parse)return window.JSON.parse(e);if(null===e)return e;if("string"==typeof e&&(e=m.trim(e),e&&a.test(e.replace(c,"@").replace(d,"]").replace(b,""))))return new Function("return "+e)();throw new Error("Invalid JSON: "+e)}}()}),define("mobi/event",["./core","./lang"],function(a,b,c){function d(a){return a._zid||(a._zid=p++)}function e(a){var b=(""+a).split(".");return{e:b[0],ns:b.slice(1).sort().join(" ")}}function f(a){return new RegExp("(?:^| )"+a.replace(" "," .* ?")+"(?: |$)")}function g(a,b,c,g){if(b=e(b),b.ns)var h=f(b.ns);return(o[d(a)]||[]).filter(function(a){return!(!a||b.e&&a.e!==b.e||b.ns&&!h.test(a.ns)||c&&d(a.fn)!==d(c)||g&&a.sel!==g)})}function h(a,b,c){"string"!=typeof a?m.each(a,c):n.each(a.split(/\s/),function(a){c(a,b)})}function i(a){return q[a]||a}function j(a,b){return a.del&&("focus"===a.e||"blur"===a.e)||!!b}function k(a,b,c,f,g,k){var l=d(a),n=o[l]||(o[l]=[]);h(b,c,function(b,c){var d=e(b);d.fn=c,d.sel=f,d.e in q&&(c=function(a){var b=a.relatedTarget;return!b||b!==this&&!m.contains(this,b)?d.fn.apply(this,arguments):void 0}),d.del=g&&g(c,b);var h=d.del||c;d.proxy=function(b){var c=h.apply(a,[b].concat(b.data));return c===!1&&(b.preventDefault(),b.stopPropagation()),c},d.i=n.length,n.push(d),a.addEventListener(i(d.e),d.proxy,j(d,k))})}function l(a,b,c,e,f){var k=d(a);h(b||"",c,function(b,c){n.each(g(a,b,c,e),function(b){delete o[k][b.i],a.removeEventListener(i(b.e),b.proxy,j(b,f))})})}var m=a("./core"),n=a("./lang"),o={},p=1,q={mouseenter:"mouseover",mouseleave:"mouseout"};!function(){var a=function(){return!0},b=function(){return!1},c=/^([A-Z]|layer[XY]$)/,d={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"},e=function(e){var f,g={originalEvent:e};for(f in e)c.test(f)||void 0===e[f]||(g[f]=e[f]);return n.each(d,function(c,d){g[d]=function(){return this[c]=a,e[d].apply(e,arguments)},g[c]=b}),g},f=function(a){if(!("defaultPrevented"in a)){a.defaultPrevented=!1;var b=a.preventDefault;a.preventDefault=function(){this.defaultPrevented=!0,b.call(this)}}},g={};g.click=g.mousedown=g.mouseup=g.mousemove="MouseEvents";var h=function(a,b){"string"!=typeof a&&(b=a,a=b.type);var c=document.createEvent(g[a]||"Events"),d=!0;if(b)for(var e in b)"bubbles"===e?d=!!b[e]:c[e]=b[e];return c.initEvent(a,d,!0,null,null,null,null,null,null,null,null,null,null,null,null),c.isDefaultPrevented=function(){return this.defaultPrevented},c};m.Event=h,n.extend(m.fn,{bind:function(a,b){return this.each(function(){k(this,a,b)})},unbind:function(a,b){return this.each(function(){l(this,a,b)})},one:function(a,b){return this.each(function(c,d){k(this,a,b,null,function(a,b){return function(){var c=a.apply(d,arguments);return l(d,b,a),c}})})},delegate:function(a,b,c){return this.each(function(d,f){k(f,b,c,a,function(b){return function(c){var d,g=m(c.target).closest(a,f).get(0);return g?(d=m.extend(e(c),{currentTarget:g,liveFired:f}),b.apply(g,[d].concat([].slice.call(arguments,1)))):void 0}})})},undelegate:function(a,b,c){return this.each(function(){l(this,b,c,a)})},live:function(a,b){return m(document.body).delegate(this.selector,a,b),this},die:function(a,b){return m(document.body).undelegate(this.selector,a,b),this},on:function(a,b,c){return!b||m.isFunction(b)?this.bind(a,b||c):this.delegate(b,a,c)},off:function(a,b,c){return!b||m.isFunction(b)?this.unbind(a,b||c):this.undelegate(b,a,c)},trigger:function(a,b){return("string"==typeof a||m.isPlainObject(a))&&(a=h(a)),f(a),a.data=b,this.each(function(){"dispatchEvent"in this&&this.dispatchEvent(a)})}}),n.each("focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" "),function(a){m.fn[a]=function(b){return b?this.bind(a,b):this.trigger(a)}}),n.each(["focus","blur"],function(a){m.fn[a]=function(b){return b?this.bind(a,b):this.each(function(){try{this[a]()}catch(b){}}),this}})}(),c.exports=m}),define("mobi/ajax",["./core","./lang","./event"],function(a,b,c){var d=a("./core");a("./event");var e,f=0,g=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,h=/^(?:text|application)\/javascript/i,i=/^(?:text|application)\/xml/i,j="application/json",k="text/html",l=/^\s*$/,m=function(){},n={type:"GET",beforeSend:m,success:m,error:m,complete:m,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript",json:j,xml:"application/xml, text/xml",html:k,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0},o=function(a,b,c){var e=d.Event(b);return d(a).trigger(e,c),!e.defaultPrevented},p=function(a,b,c,d){return a.global?o(b||document,c,d):void 0},q=0,r={before:function(a,b){var c=b.context;return b.beforeSend.call(c,a,b)===!1||p(b,c,"ajaxBeforeSend",[a,b])===!1?(q--,!1):(p(b,c,"ajaxSend",[a,b]),void 0)},start:function(a){a.global&&0===q++&&p(a,null,"ajaxStart")},success:function(a,b,c){var d=c.context,e="success";c.success.call(d,a,e,b),p(c,d,"ajaxSuccess",[b,c,a]),r.complete(e,b,c)},error:function(a,b,c,d){var e=d.context;d.error.call(e,c,b,a),p(d,e,"ajaxError",[c,d,a]),r.complete(b,c,d)},complete:function(a,b,c){var d=c.context;c.complete.call(d,b,a),p(c,d,"ajaxComplete",[b,c]),r.stop(c)},stop:function(a){a.global&&!--q&&p(a,null,"ajaxStop")}},s=function(a){return a&&(a=a.split(";",2)[0]),a&&(a===k?"html":a===j?"json":h.test(a)?"script":i.test(a)&&"xml")||"text"},t=function(a,b){return a+=-1===a.indexOf("?")?"?":"&",a+b},u=function(a){a.processData&&a.data&&"string"!=typeof a.data&&(a.data=d.param(a.data,a.traditional)),!a.data||a.type&&"GET"!==a.type.toUpperCase()||(a.url=t(a.url,a.data))},v=function(a,b,c,e){var f=d.isArray(b);d.each(b,function(b,d){e&&(b=c?e:e+"["+(f?"":b)+"]"),!e&&f?a.add(d.name,d.value):f||!c&&"object"==typeof d?v(a,d,c,b):a.add(b,d)})},w=function(a,b,c,f){var g=!d.isFunction(b);return{url:a,data:g?b:e,success:g?d.isFunction(c)?c:e:b,dataType:g?f||c:c}},x=encodeURIComponent,y={ajaxSetting:function(a){d.extend(n,a)},param:function(a,b){var c=[];return c.add=function(a,b){this.push(x(a)+"="+x(b))},v(c,a,b),c.join("&").replace(/%20/g,"+")},ajaxJSONP:function(a){if(!("type"in a))return d.ajax(a);var b,c="jsonp"+ ++f,e=document.createElement("script"),g=function(){clearTimeout(b),d(e).remove(),delete window[c]},h=function(b){g(),b&&"timeout"!==b||(window[c]=m),r.error(null,b||"abort",i,a)},i={abort:h};return r.before(i,a)===!1?(h("abort"),!1):(window[c]=function(b){g(),r.success(b,i,a)},e.onerror=function(){h("error")},e.src=a.url.replace(/=\?/,"="+c),d("head").append(e),a.timeout>0&&(b=setTimeout(function(){h("timeout")},a.timeout)),i)},ajax:function(a){var b=d.extend({},a||{});for(var c in n)d.isUndefined(b[c])&&(b[c]=n[c]);r.start(b),b.crossDomain||(b.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(b.url)&&RegExp.$2!==window.location.host),b.url||(b.url=window.location.toString()),u(b),b.cache===!1&&(b.url=t(b.url,"_="+Date.now()));var e=b.dataType,f=/=\?/.test(b.url);if("jsonp"===e||f)return f||(b.url=t(b.url,"callback=?")),d.ajaxJSONP(b);var g,h=b.accepts[e],i={},j=/^([\w-]+:)\/\//.test(b.url)?RegExp.$1:window.location.protocol,k=b.xhr();b.crossDomain||(i["X-Requested-With"]="XMLHttpRequest"),h&&(i.Accept=h,h.indexOf(",")>-1&&(h=h.split(",",2)[0]),k.overrideMimeType&&k.overrideMimeType(h)),(b.contentType||b.contentType!==!1&&b.data&&"GET"!==b.type.toUpperCase())&&(i["Content-Type"]=b.contentType||"application/x-www-form-urlencoded"),b.headers=d.extend(i,b.headers||{}),k.onreadystatechange=function(){if(4===k.readyState){k.onreadystatechange=m,clearTimeout(g);var a,c=!1;if(k.status>=200&&k.status<300||304===k.status||0===k.status&&"file:"===j){e=e||s(k.getResponseHeader("content-type")),a=k.responseText;try{if("script"===e){var f=eval;f(a)}else"xml"===e?a=k.responseXML:"json"===e&&(a=l.test(a)?null:d.parseJSON(a))}catch(h){c=h}c?r.error(c,"parsererror",k,b):r.success(a,k,b)}else r.error(null,k.status?"error":"abort",k,b)}};var o="async"in b?b.async:!0;k.open(b.type,b.url,o);for(var p in b.headers)k.setRequestHeader(p,b.headers[p]);return r.before(k,b)===!1?(k.abort(),!1):(b.timeout>0&&(g=setTimeout(function(){k.onreadystatechange=m,k.abort(),r.error(null,"timeout",k,b)},b.timeout)),k.send(b.data?b.data:null),k)},get:function(){return d.ajax(w.apply(null,arguments))},post:function(){var a=w.apply(null,arguments);return a.type="POST",d.ajax(a)},getJSON:function(){var a=w.apply(null,arguments);return a.dataType="json",d.ajax(a)}};d.extend(d,y),d.fn.load=function(a,b,c){if(!this.length)return this;var e,f=this,h=a.split(/\s/),i=w(a,b,c),j=i.success;return h.length>1&&(i.url=h[0],e=h[1]),i.success=function(a){f.html(e?d("<div>").html(a.replace(g,"")).find(e):a),j&&j.apply(f,arguments)},d.ajax(i),this},c.exports=d}),define("mobi/ajax_ext",["./lang","./ajax","./core","./event"],function(a,b,c){var d=a("./lang"),e=a("./ajax"),f={},g={loginPage:"/",noPermissionAction:function(){location.href=g.loginPage},errorAction:function(){}},h={success:function(a){return a&&200===+a.code},permission:function(a){return a&&401===+a.code}},i=function(a,b,c){var e;return e=b&&b.rule&&d.isFunction(b.rule[c])?b.rule[c]:h[c],e(a)===!0},j={setSuccessRule:function(a){h.success=function(b){return a(b)},j.setSuccessRule=null},setPermissionRule:function(a){h.permission=function(b){return a(b)},j.setPermissionRule=null},setNoPermissionAction:function(a){g.noPermissionAction=a,j.setNoPermissionAction=null},setErrorAction:function(a){g.errorAction=a,j.setErrorAction=null},base:function(a){var b=d.extend({},a||{});return!b.before||b.before&&b.before()!==!1?(b.dataType="json",b.type=a.type||"GET",b.success=function(c){i(c,b,"success")?a.success&&a.success(c):i(c,b,"permission")?d.isFunction(a.permission)?a.permission(c):g.noPermissionAction():d.isFunction(a.error)?a.error(c):g.errorAction(c)},b.error=function(b,c){"abort"!==c&&(d.isFunction(a.error)?a.error(b,c):g.errorAction(b,c))},b.complete=function(b,c){d.isFunction(a.complete)&&a.complete(b,c)},e.ajax(b)):void 0},single:function(a){f[a]||(f[a]={});var b={send:function(b){var c=f[a].url&&b.url===f[a].url;if(c)for(var d in b.data)if(b.data[d]!==f[a].data[d]){c=!1;break}if(c)return!1;f[a].xhr&&f[a].xhr.abort();var g=b.complete;b.complete=function(a,b){e.isFunction(g)&&g(a,b)},f[a]={xhr:j.base(b),url:b.url,data:b.data}},abort:function(){f[a]&&f[a].xhr&&4!==f[a].xhr.readyState&&(f[a].xhr.abort(),f[a].xhr=null)}};return b}};c.exports=j}),define("mobi/touch",["./core","./lang","./event"],function(a){function b(a){return"tagName"in a?a:a.parentNode}function c(a,b,c,d){var e=Math.abs(a-b),f=Math.abs(c-d);return e>=f?a-b>0?"Left":"Right":c-d>0?"Up":"Down"}function d(){k=null,m.last&&(m.el.trigger("longTap"),m={})}function e(){k&&clearTimeout(k),k=null}function f(){h&&clearTimeout(h),i&&clearTimeout(i),j&&clearTimeout(j),k&&clearTimeout(k),h=i=j=k=null,m={}}var g=a("./core");a("./event");var h,i,j,k,l=a("./lang"),m={},n=750;g(document).ready(function(){var a,l;g(document.body).bind("touchstart",function(c){a=Date.now(),l=a-(m.last||a),m.el=g(b(c.touches[0].target)),h&&clearTimeout(h),m.x1=c.touches[0].pageX,m.y1=c.touches[0].pageY,l>0&&250>=l&&(m.isDoubleTap=!0),m.last=a,k=setTimeout(d,n)}).bind("touchmove",function(a){e(),m.x2=a.touches[0].pageX,m.y2=a.touches[0].pageY,Math.abs(m.x1-m.x2)>10&&a.preventDefault()}).bind("touchend",function(){e(),m.x2&&Math.abs(m.x1-m.x2)>30||m.y2&&Math.abs(m.y1-m.y2)>30?j=setTimeout(function(){m.el.trigger("swipe"),m.el.trigger("swipe"+c(m.x1,m.x2,m.y1,m.y2)),m={}},0):"last"in m&&(i=setTimeout(function(){var a=g.Event("tap");a.cancelTouch=f,m.el.trigger(a),m.isDoubleTap?(m.el.trigger("doubleTap"),m={}):h=setTimeout(function(){h=null,m.el.trigger("singleTap"),m={}},250)},0))}).bind("touchcancel",f),g(window).bind("scroll",f)}),l.each(["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"],function(a){g.fn[a]=function(b){return this.bind(a,b)}})}),define("mobi/action",["./core","./lang"],function(a){var b=a("./core"),c={dom:[],eventType:[],action:[]},d="data-action",e={setActionKey:function(a){d=a,e.setActionKey=null},listen:function(a,e,f){a=a||{},e=e?b(e):b(document),f=f||"click";var g=c.dom.indexOf(e[0]);if(-1!==g&&c.eventType[g]!==f&&(g=-1),-1===g)c.dom.push(e[0]),c.eventType.push(f),c.action.push(a),g=c.action.length-1,e[f](function(a){var e=b(a.target),f=e.attr(d),h=e;f||(h=e.closest("["+d+"]"),f=h.attr(d));var i=!0,j=c.action[g],k=j[f];if(k)if(b.isFunction(k))i=k.call(e,a,h,f);else if(b.isFunction(k.is)||b.isFunction(k.action)){var l=k.is||k.action;i=l.call(k.scope||e,a,h,f)}for(var m=0,n=c.action.length;n>m;m++){var o=c.action[m];for(var p in o)p!==f&&o[p]&&o[p].not&&b.isFunction(o[p].not)&&o[p].not.call(o[p].scope||e,a,h,f)}if(-1===i)a.stopPropagation();else{if(i===!0)return!0;if(i===!1)return!1;a.preventDefault()}});else{var h=c.action[g];for(var i in a)h[i]=a[i]}return e}};return e}),define("mobi/detect",["./core","./lang"],function(a){var b=a("./core"),c=function(a){var b=this.os={},c=this.browser={},d=a.match(/WebKit\/([\d.]+)/),e=a.match(/(Android)\s+([\d.]+)/),f=a.match(/(iPad).*OS\s([\d_]+)/),g=!f&&a.match(/(iPhone\sOS)\s([\d_]+)/),h=a.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),i=h&&a.match(/TouchPad/),j=a.match(/Kindle\/([\d.]+)/),k=a.match(/Silk\/([\d._]+)/),l=a.match(/(BlackBerry).*Version\/([\d.]+)/),m=a.match(/(BB10).*Version\/([\d.]+)/),n=a.match(/(RIM\sTablet\sOS)\s([\d.]+)/),o=a.match(/PlayBook/),p=a.match(/Chrome\/([\d.]+)/)||a.match(/CriOS\/([\d.]+)/),q=a.match(/Firefox\/([\d.]+)/);return(c.webkit=!!d)&&(c.version=d[1]),e&&(b.android=!0,b.version=e[2]),g&&(b.ios=b.iphone=!0,b.version=g[2].replace(/_/g,".")),f&&(b.ios=b.ipad=!0,b.version=f[2].replace(/_/g,".")),h&&(b.webos=!0,b.version=h[2]),i&&(b.touchpad=!0),l&&(b.blackberry=!0,b.version=l[2]),m&&(b.bb10=!0,b.version=m[2]),n&&(b.rimtabletos=!0,b.version=n[2]),j&&(b.kindle=!0,b.version=j[1]),o?c.playbook=!0:k?(c.silk=!0,c.version=k[1]):!k&&b.android&&a.match(/Kindle Fire/)&&(c.silk=!0),p?(c.chrome=!0,c.version=p[1]):q&&(c.firefox=!0,c.version=q[1]),b.tablet=!!(f||o||e&&!a.match(/Mobile/)||q&&a.match(/Tablet/)),b.phone=!(b.tablet||!(e||g||h||l||m||p&&a.match(/Android/)||p&&a.match(/CriOS\/([\d.]+)/)||q&&a.match(/Mobile/))),this};return c.call(b,navigator.userAgent),b.detect=c,function(a){return c.call(b,a)}}),define("mobi/history",["./core","./lang"],function(a,b,c){var d,e,f=a("./core"),g=/\((.*?)\)/g,h=/(\(\?)?:\w+/g,i=/\*\w+/g,j=/[\-{}\[\]+?.,\\\^$|#\s]/g,k="defaultRouter",l=location.href,m={routeToReg:function(a){return a=a.replace(j,"\\$&").replace(g,"(?:$1)?").replace(h,function(a,b){return b?a:"([^/]+)"}).replace(i,"(.*?)"),new RegExp("^"+a+"$")},getHash:function(){return location.hash.replace(/^#/,"")},setHash:function(a,b){var c=location.href;c=c.replace(/#(.+)/,"#"+a),b===!0?location.replace(c):location.hash=a},search:function(a,b){var c;for(var d in b){var e=b[d];if(c=a.match(e.reg))return{action:e.action,params:f.isArray(c)?c.slice(1):[]}}},fetch:function(a,b){var c={action:null,params:[]};return a=f.trim(a),a&&a!==k?c=m.search(a,b):e&&("string"==typeof e?c=m.search(a,b):"function"==typeof e&&(c.action=e)),c},match:function(a,b){var c=m.fetch(a,b);c&&c.action&&(c.action.apply(null,c.params),c.action.callback&&(c.action.callback(),delete c.action.callback))}},n="onhashchange"in window&&(document.documentMode===d||8===document.documentMode),o={},p={get:m.getHash,empty:function(){location.hash=""},trigger:function(a,b,c){if(c=b===!0?!0:c,m.setHash(a,c),f.isFunction(b)){var d=m.fetch(a,o);d.action&&(d.action.callback=b)}},listen:function(a){!function(){for(var b in a)b!==k?o[b]||(o[b]={reg:m.routeToReg(b),action:a[b]}):e=a[b]}(),n&&(window.onhashchange=function(a){a=a||window.event;var b=a.oldURL||l,c=a.newURL||location.href,d=m.getHash();b!==c&&(l=c,m.match(d?d:e,o))});var b=m.getHash();b?m.match(b,o):m.match(e,o)}};c.exports=p});